■はじめに, Introduction
　・ダウンロードして頂き、ありがとうございます。
　・本ファイルは本プログラムのシステム要件、使い方、注意点などを記載しています。
　・ご使用の前にご一読ください。

■ファイル説明, File Description
  main.py 		  → 変換プログラム
  start.bat 		  → プログラムを実行するためのもの(Pathが通っていること前提)
  EQ filter.png 	  → AudacityでEQフィルター使用時の参考になるかもしれない画像。
  Sine Wave Soundfont.sf2 → 主にOmniMIDIなどで使うサウンドフォント。標準のMidiの音を正弦波に変えてくれる。
  使い方.txt 		  → 今見ているテキストファイル。
  READNE.md 		  → Githubでの説明用。

■概要, Summary
　・このツールは任意のWavファイルをフーリエ変換を利用して、なるべく元ファイルと同じ聞こえ方をするようにMidiへと変換するものです。
　・ある程度の知識があれば、プログラムをいじって自分好みにカスタマイズできますが、変なプログラムになっているのでご注意を。

■システム要件(動作確認が取れているもの), Confirmed system requirements
　OS：  Windows11
　CPU:  余程古くなければ時間はかかっても動くはず。
　RAM:  16GB以上推奨。元が5分程度の曲で8~12GBぐらい使う(設定により変動)

■アンインストール, How to uninstall
　・このファイルのあるフォルダごとゴミ箱に捨てる。

■前提ソフト(基本的に最新版で良い), Required Software
  ・Audacity 3.4.2 - 3.6.1
  ・Python   3.10.6
  ・OmniMIDI 14.8.5 (正弦波合成できれば基本的に何でもよい)
  ・Midi再生ソフト (おすすめはTom's MIDI Player)

■変換の前に..., What to install with pip
  numpy, mido, scipy をインストール
  pip install numpy  (1.26.4)
  pip install mido   (1.3.2)
  pip install scipy  (1.12.0)

■変換方法, Conversion Procedure
　以下の手順を実行してください。
  1. Audacityを起動し、任意の音声ファイルをドラッグアンドドロップ、音声波形の左下にある "選択" をクリックし、上のタブから 「トラック>ミックス>ステレオをモノラルにミックスダウン」 の順に操作。
　2. 「エフェクト>イコライザーとフィルター>EQフィルター曲線」 から、2kHzから8kHzが減少していくように加工(参考画像あり)
  3. 「エフェクト→ピッチとテンポ→テンポを変更」 から、下の "高品質な伸縮" にチェックを入れて、変更率を "-93.750" にする。
  4. 「トラック>再サンプリング」の値を "40960" にする。
  5. 「エフェクト>音量と圧縮>増幅」 をクリックし、そのまま適用をクリックする。
　6. 「ファイル>オーディオをエクスポート」 をクリックし、形式は "WAV (Microsoft)" 、サンプリング周波数は "40960Hz" 、エンコーディングは "Signed 16-bit PCM" にして、変換プログラムがあるフォルダに "test.wav" という名前で書き出す。
　7．"start.bat" という名前のバッチファイルを起動する。このとき、同じディレクトリに "test.wav" という名前のファイルがあれば、それが変換され、無ければエラーで終了する。
　8．フリーズしているわけではないので気長に待つ。
　9．頑張って待ち続けると、 "test_wav_pitch_bend.mid" という名前のmidiファイルが生成され、さらにコマンドプロンプトが閉じるのを待つと再生できるようになる。
 10．Tom's MIDI Playerなどのmidiプレイヤーで聴く。

■注意点, Important point
  ・2番のEQフィルターをしないと高音が強い場合があるが、好みで調整しても問題ない。
  ・3番は、サンプリング周波数が高いと時間がかかるため、44100Hzなどの一般的なサンプリング周波数に落としてから行っても問題ない。
  ・4番の再サンプリングは、サンプリング周波数が40960Hzより小さい場合はしなくても問題ないが、大きい場合は音質がとても劣化する問題があるため行う。
  ・7番の変換中に、RAMがシステムの限界に近づきすぎるとパソコンがおかしくなる可能性があるため、残り2~4GBぐらいになってしまったら強制終了させる。
　・1/16倍速された音声データを対象としているため、上記の3番の手順を行わないとMidiの再生速度が16倍速された状態になる。
　・Midiの再生には"VirtualMIDISynth"や"OmniMIDI"やシンセサイザー等を利用して、正弦波でMidiデータを合成して聴く。
   (なお、環境によって聴こえ方が変になる可能性がある)

■最後に, Finally
　・このテキストファイルの内容は修正を加える可能性があります。
　・本プログラムは完全無料です。改変は許可しますが、再配布を禁じます。
　・本プログラムを使用したことによる如何なる損害について責任は一切負いません。

最終編集日:2024/08/16
